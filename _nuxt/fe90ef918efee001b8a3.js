(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONHTTPError=t.TextHTTPError=t.HTTPError=t.getPagination=void 0;var n=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(340);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"getPagination",{enumerable:!0,get:function(){return c.getPagination}});var d=t.HTTPError=function(e){function t(e){l(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.statusText));return r.name=r.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=new Error(e.statusText).stack,r.status=e.status,r}return h(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),v=t.TextHTTPError=function(e){function t(e,data){l(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.data=data,r}return h(t,e),t}(d),y=t.JSONHTTPError=function(e){function t(e,r){l(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.json=r,n}return h(t,e),t}(d),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1];l(this,e),this.apiURL=t,this.apiURL.match(/\/[^\/]?/)&&(this._sameOrigin=!0),this.defaultHeaders=r&&r.defaultHeaders||{}}return o(e,[{key:"headers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n({},this.defaultHeaders,{"Content-Type":"application/json"},e)}},{key:"parseJsonResponse",value:function(e){return e.json().then((function(t){if(!e.ok)return Promise.reject(new y(e,t));var r=(0,c.getPagination)(e);return r?{pagination:r,items:t}:t}))}},{key:"request",value:function(path){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.headers(t.headers||{});return this._sameOrigin&&(t.credentials=t.credentials||"same-origin"),fetch(this.apiURL+path,n({},t,{headers:r})).then((function(t){var r=t.headers.get("Content-Type");return r&&r.match(/json/)?e.parseJsonResponse(t):t.ok?t.text().then((function(data){})):t.text().then((function(data){return Promise.reject(new v(t,data))}))}))}}]),e}();t.default=m},339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(336),c=f(o),l=f(r(341));function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=/^http:\/\//,v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.APIUrl,n=void 0===r?"/.netlify/identity":r,o=t.audience,l=void 0===o?"":o,f=t.setCookie,v=void 0!==f&&f;h(this,e),n.match(d)&&console.warn("Warning:\n\nDO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!\nGoTrue REQUIRES HTTPS to work securely."),l&&(this.audience=l),this.setCookie=v,this.api=new c.default(n)}return n(e,[{key:"_request",value:function(path){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.headers=e.headers||{};var t=e.audience||this.audience;return t&&(e.headers["X-JWT-AUD"]=t),this.api.request(path,e).catch((function(e){return e instanceof o.JSONHTTPError&&e.json&&(e.json.msg?e.message=e.json.msg:e.json.error&&(e.message=e.json.error+": "+e.json.error_description)),Promise.reject(e)}))}},{key:"settings",value:function(){return this._request("/settings")}},{key:"signup",value:function(e,t,data){return this._request("/signup",{method:"POST",body:JSON.stringify({email:e,password:t,data:data})})}},{key:"login",value:function(e,t,r){var n=this;return this._setRememberHeaders(r),this._request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username="+encodeURIComponent(e)+"&password="+encodeURIComponent(t)}).then((function(e){return l.default.removeSavedSession(),n.createUser(e,r)}))}},{key:"loginExternalUrl",value:function(e){return this.api.apiURL+"/authorize?provider="+e}},{key:"confirm",value:function(e,t){return this._setRememberHeaders(t),this.verify("signup",e,t)}},{key:"requestPasswordRecovery",value:function(e){return this._request("/recover",{method:"POST",body:JSON.stringify({email:e})})}},{key:"recover",value:function(e,t){return this._setRememberHeaders(t),this.verify("recovery",e,t)}},{key:"acceptInvite",value:function(e,t,r){var n=this;return this._setRememberHeaders(r),this._request("/verify",{method:"POST",body:JSON.stringify({token:e,password:t,type:"signup"})}).then((function(e){return n.createUser(e,r)}))}},{key:"acceptInviteExternalUrl",value:function(e,t){return this.api.apiURL+"/authorize?provider="+e+"&invite_token="+t}},{key:"createUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._setRememberHeaders(t);var r=new l.default(this.api,e,this.audience);return r.getUserData().then((function(e){return t&&e._saveSession(),e}))}},{key:"currentUser",value:function(){var e=l.default.recoverSession(this.api);return e&&this._setRememberHeaders(e._fromStorage),e}},{key:"verify",value:function(e,t,r){var n=this;return this._setRememberHeaders(r),this._request("/verify",{method:"POST",body:JSON.stringify({token:t,type:e})}).then((function(e){return n.createUser(e,r)}))}},{key:"_setRememberHeaders",value:function(e){this.setCookie&&(this.api.defaultHeaders=this.api.defaultHeaders||{},this.api.defaultHeaders["X-Use-Cookie"]=e?"1":"session")}}]),e}();t.default=v,"undefined"!=typeof window&&(window.GoTrue=v)},340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,i){var t=[],r=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return t}(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.getPagination=function(e){var t=e.headers.get("Link"),r={};if(null==t)return null;t=t.split(",");for(var o=e.headers.get("X-Total-Count"),i=0,c=t.length;i<c;i++){var l=t[i].replace(/(^\s*|\s*$)/,"").split(";"),f=n(l,2),h=f[0],d=f[1],v=h.match(/page=(\d+)/),y=v&&parseInt(v[1],10);d.match(/last/)?r.last=y:d.match(/next/)?r.next=y:d.match(/prev/)?r.prev=y:d.match(/first/)&&(r.first=y)}return r.last=Math.max(r.last||0,r.prev&&r.prev+1||0),r.current=r.next?r.next-1:r.last||1,r.total=o?parseInt(o,10):null,r}},341:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(336),l=h(c),f=h(r(342));function h(e){return e&&e.__esModule?e:{default:e}}var d={},v=null,y={api:1,token:1,audience:1,url:1},m={api:1},_=function(){return"undefined"!=typeof window},k=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this.url=t.apiURL,this.audience=n,this._processTokenResponse(r),v=this}return o(e,[{key:"update",value:function(e){var t=this;return this._request("/user",{method:"PUT",body:JSON.stringify(e)}).then((function(e){return t._saveUserData(e)._refreshSavedSession()}))}},{key:"jwt",value:function(e){var t=this.tokenDetails(),r=t.expires_at,n=t.refresh_token,o=t.access_token;return e||r-6e4<Date.now()?this._refreshToken(n):Promise.resolve(o)}},{key:"logout",value:function(){return this._request("/logout",{method:"POST"}).then(this.clearSession.bind(this)).catch(this.clearSession.bind(this))}},{key:"_refreshToken",value:function(e){var t=this;return d[e]?d[e]:d[e]=this.api.request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token="+e}).then((function(r){return delete d[e],t._processTokenResponse(r),t._refreshSavedSession(),t.token.access_token})).catch((function(r){return delete d[e],t.clearSession(),Promise.reject(r)}))}},{key:"_request",value:function(path){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers=t.headers||{};var r=t.audience||this.audience;return r&&(t.headers["X-JWT-AUD"]=r),this.jwt().then((function(r){return e.api.request(path,n({headers:Object.assign(t.headers,{Authorization:"Bearer "+r})},t)).catch((function(e){return e instanceof c.JSONHTTPError&&e.json&&(e.json.msg?e.message=e.json.msg:e.json.error&&(e.message=e.json.error+": "+e.json.error_description)),Promise.reject(e)}))}))}},{key:"getUserData",value:function(){return this._request("/user").then(this._saveUserData.bind(this)).then(this._refreshSavedSession.bind(this))}},{key:"_saveUserData",value:function(t,r){for(var n in t)n in e.prototype||n in y||(this[n]=t[n]);return r&&(this._fromStorage=!0),this}},{key:"_processTokenResponse",value:function(e){this.token=e;var t=void 0;try{t=JSON.parse(function(e){var output=e.replace(/-/g,"+").replace(/_/g,"/");switch(output.length%4){case 0:break;case 2:output+="==";break;case 3:output+="=";break;default:throw"Illegal base64url string!"}var t=window.atob(output);try{return decodeURIComponent(escape(t))}catch(e){return t}}(e.access_token.split(".")[1])),this.token.expires_at=1e3*t.exp}catch(t){console.error(new Error("Gotrue-js: Failed to parse tokenResponse claims: "+JSON.stringify(e)))}}},{key:"_refreshSavedSession",value:function(){return _()&&localStorage.getItem("gotrue.user")&&this._saveSession(),this}},{key:"_saveSession",value:function(){return _()&&localStorage.setItem("gotrue.user",JSON.stringify(this._details)),this}},{key:"tokenDetails",value:function(){return this.token}},{key:"clearSession",value:function(){e.removeSavedSession(),this.token=null,v=null}},{key:"admin",get:function(){return new f.default(this)}},{key:"_details",get:function(){var t={};for(var r in this)r in e.prototype||r in m||(t[r]=this[r]);return t}}],[{key:"removeSavedSession",value:function(){_()&&localStorage.removeItem("gotrue.user")}},{key:"recoverSession",value:function(t){if(v)return v;var r=_()&&localStorage.getItem("gotrue.user");if(r)try{var data=JSON.parse(r),n=data.url,o=data.token,c=data.audience;return n&&o?new e(t||new l.default(n,{}),o,c)._saveUserData(data,!0):null}catch(e){return console.error(new Error("Gotrue-js: Error recovering session: "+e)),null}return null}}]),e}();t.default=k},342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user=t}return n(e,[{key:"listUsers",value:function(e){return this.user._request("/admin/users",{method:"GET",audience:e})}},{key:"getUser",value:function(e){return this.user._request("/admin/users/"+e.id)}},{key:"updateUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.user._request("/admin/users/"+e.id,{method:"PUT",body:JSON.stringify(t)})}},{key:"createUser",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.email=e,r.password=t,this.user._request("/admin/users",{method:"POST",body:JSON.stringify(r)})}},{key:"deleteUser",value:function(e){return this.user._request("/admin/users/"+e.id,{method:"DELETE"})}}]),e}();t.default=o},370:function(e,t,r){"use strict";r.r(t);r(29);var n=r(339),o=new(r.n(n).a)({APIUrl:"https://aparka.netlify.app/.netlify/identity",audience:"",setCookie:!1}),c={name:"LogIn",data:function(){return{name:"",password:""}},methods:{submit:function(){event.preventDefault(),o.signup(this.name,this.password).then((function(e){return console.log("Confirmation email sent",JSON.stringify(e))})).catch((function(e){return console.log("It's an error",e)}))}}},l=r(43),f=r(48),h=r.n(f),d=r(189),v=r(366),y=r(361),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-form",[r("v-text-field",{attrs:{label:"Nombre"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{type:"password",label:"Contraseña"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-btn",{attrs:{outlined:""},on:{click:e.submit}},[e._v("Registrarse")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VBtn:d.a,VForm:v.a,VTextField:y.a})}}]);